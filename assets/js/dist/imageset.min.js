/*!
 * ImageSet (1.0.0)
 *
 * This script file is needed for lazyloading imagesets,
 * generated with ImageSet for Kirby.
 *
 * Copyright (c) 2016 Fabian Michael <hallo@fabianmichael.de>
 * 
 * @license SEE LICENSE IN license.md
 */
!function(e,t,n){"use strict";function a(e){"loading"!=t.readyState?e():t.addEventListener("DOMContentLoaded",e)}var i={wrapperClass:"imageset",wrapperLazyloadClass:"imageset--lazyload",wrapperLoadedClass:"imageset--loaded",imageElementClass:"imageset__element",placeholderClass:"imageset__placeholder",placeholderLoadedClass:"imageset__placeholder--loaded"},s=("[object OperaMini]"===Object.prototype.toString.call(e.operamini),e.requestAnimationFrame||function(e){setTimeout(e,1e3/60)},function(){return t.documentElement.classList?function(e,t){return e.classList.contains(t)}:function(e,t){return!!~e.className.split(/\s+/).indexOf(t)}}(),function(){return t.documentElement.classList?function(e,t){e.classList.add(t)}:function(e,t){var n=e.className.split(/\s+/);~n.indexOf(t)||(n.push(t),e.className=n.join(" "))}}()),o=function(){return t.documentElement.classList?function(e,t){return e.classList.remove(t)}:function(e,t){var n=e.className.split(/\s+/),a=n.indexOf(t);~a&&(n.splice(a,1),e.className=n.join(" "))}}();o(t.documentElement,"no-js"),s(t.documentElement,"js"),e.lazySizesConfig=e.lazySizesConfig||{},e.lazySizesConfig.init=!1,s(t.documentElement,"operamini");var r=function(t){s(t,i.wrapperLoadedClass);var n,a=t.getElementsByTagName("source"),o=t.getElementsByClassName(i.imageElementClass)[0];n=a.length>0?a[a.length-1]:o;var r=n.getAttribute("data-srcset").split(/,\s*/);"console"in e&&console.log("c",r);for(var l=a.length;l--;)a[l].parentNode.removeChild(a[l]);o.src=r.pop().replace(/\s*\d+[wx]$/,"")};return void a(function(){t.getElementsByTagName("h1")[0].innerHTML="mini";for(var e=t.getElementsByClassName(i.wrapperLazyloadClass),n=0,a=e.length;n<a;n++)r(e[n])})}(window,document),/*!
 * lazysizes 2.0.7 (with "static-gecko-picture" plugin)
 * 
 * Copyright (C) 2015 Alexander Farkas
 * 
 * @license The MIT License (MIT)
 */
function(e,t){var n=t(e,e.document);e.lazySizes=n,"object"==typeof module&&module.exports&&(module.exports=n)}(window,function(e,t){"use strict";if(t.getElementsByClassName){var n,a=t.documentElement,i=e.Date,s=e.HTMLPictureElement,o="addEventListener",r="getAttribute",l=e[o],c=e.setTimeout,d=e.requestAnimationFrame||c,u=e.requestIdleCallback,f=/^picture$/i,m=["load","error","lazyincluded","_lazyloaded"],g={},p=Array.prototype.forEach,v=function(e,t){return g[t]||(g[t]=new RegExp("(\\s|^)"+t+"(\\s|$)")),g[t].test(e[r]("class")||"")&&g[t]},z=function(e,t){v(e,t)||e.setAttribute("class",(e[r]("class")||"").trim()+" "+t)},h=function(e,t){var n;(n=v(e,t))&&e.setAttribute("class",(e[r]("class")||"").replace(n," "))},y=function(e,t,n){var a=n?o:"removeEventListener";n&&y(e,t),m.forEach(function(n){e[a](n,t)})},C=function(e,n,a,i,s){var o=t.createEvent("CustomEvent");return o.initCustomEvent(n,!i,!s,a||{}),e.dispatchEvent(o),o},A=function(t,a){var i;!s&&(i=e.picturefill||n.pf)?i({reevaluate:!0,elements:[t]}):a&&a.src&&(t.src=a.src)},E=function(e,t){return(getComputedStyle(e,null)||{})[t]},b=function(e,t,a){for(a=a||e.offsetWidth;a<n.minSize&&t&&!e._lazysizesWidth;)a=t.offsetWidth,t=t.parentNode;return a},L=function(){var e,n,a=[],i=function(){var t;for(e=!0,n=!1;a.length;)t=a.shift(),t[0].apply(t[1],t[2]);e=!1},s=function(s){e?s.apply(this,arguments):(a.push([s,this,arguments]),n||(n=!0,(t.hidden?c:d)(i)))};return s._lsFlush=i,s}(),N=function(e,t){return t?function(){L(e)}:function(){var t=this,n=arguments;L(function(){e.apply(t,n)})}},w=function(e){var t,n=0,a=125,s=666,o=s,r=function(){t=!1,n=i.now(),e()},l=u?function(){u(r,{timeout:o}),o!==s&&(o=s)}:N(function(){c(r)},!0);return function(e){var s;(e=e===!0)&&(o=44),t||(t=!0,s=a-(i.now()-n),s<0&&(s=0),e||s<9&&u?l():c(l,s))}},M=function(e){var t,n,a=99,s=function(){t=null,e()},o=function(){var e=i.now()-n;e<a?c(o,a-e):(u||s)(s)};return function(){n=i.now(),t||(t=c(o,a))}},_=function(){var s,d,u,m,g,b,_,B,T,x,O,W,R,F,$,j=/^img$/i,k=/^iframe$/i,D="onscroll"in e&&!/glebot/.test(navigator.userAgent),P=0,H=0,I=0,q=-1,U=function(e){I--,e&&e.target&&y(e.target,U),(!e||I<0||!e.target)&&(I=0)},G=function(e,n){var i,s=e,o="hidden"==E(t.body,"visibility")||"hidden"!=E(e,"visibility");for(T-=n,W+=n,x-=n,O+=n;o&&(s=s.offsetParent)&&s!=t.body&&s!=a;)o=(E(s,"opacity")||1)>0,o&&"visible"!=E(s,"overflow")&&(i=s.getBoundingClientRect(),o=O>i.left&&x<i.right&&W>i.top-1&&T<i.bottom+1);return o},K=function(){var e,i,o,l,c,f,m,p,v;if((g=n.loadMode)&&I<8&&(e=s.length)){i=0,q++,null==F&&("expand"in n||(n.expand=a.clientHeight>500&&a.clientWidth>500?500:370),R=n.expand,F=R*n.expFactor),H<F&&I<1&&q>2&&g>2&&!t.hidden?(H=F,q=0):H=g>1&&q>1&&I<6?R:P;for(;i<e;i++)if(s[i]&&!s[i]._lazyRace)if(D)if((p=s[i][r]("data-expand"))&&(f=1*p)||(f=H),v!==f&&(_=innerWidth+f*$,B=innerHeight+f,m=f*-1,v=f),o=s[i].getBoundingClientRect(),(W=o.bottom)>=m&&(T=o.top)<=B&&(O=o.right)>=m*$&&(x=o.left)<=_&&(W||O||x||T)&&(u&&I<3&&!p&&(g<3||q<4)||G(s[i],f))){if(te(s[i]),c=!0,I>9)break}else!c&&u&&!l&&I<4&&q<4&&g>2&&(d[0]||n.preloadAfterLoad)&&(d[0]||!p&&(W||O||x||T||"auto"!=s[i][r](n.sizesAttr)))&&(l=d[0]||s[i]);else te(s[i]);l&&!c&&te(l)}},Q=w(K),J=function(e){z(e.target,n.loadedClass),h(e.target,n.loadingClass),y(e.target,X)},V=N(J),X=function(e){V({target:e.target})},Y=function(e,t){try{e.contentWindow.location.replace(t)}catch(n){e.src=t}},Z=function(e){var t,a,i=e[r](n.srcsetAttr);(t=n.customMedia[e[r]("data-media")||e[r]("media")])&&e.setAttribute("media",t),i&&e.setAttribute("srcset",i),t&&(a=e.parentNode,a.insertBefore(e.cloneNode(),e),a.removeChild(e))},ee=N(function(e,t,a,i,s){var o,l,d,u,g,v;(g=C(e,"lazybeforeunveil",t)).defaultPrevented||(i&&(a?z(e,n.autosizesClass):e.setAttribute("sizes",i)),l=e[r](n.srcsetAttr),o=e[r](n.srcAttr),s&&(d=e.parentNode,u=d&&f.test(d.nodeName||"")),v=t.firesLoad||"src"in e&&(l||o||u),g={target:e},v&&(y(e,U,!0),clearTimeout(m),m=c(U,2500),z(e,n.loadingClass),y(e,X,!0)),u&&p.call(d.getElementsByTagName("source"),Z),l?e.setAttribute("srcset",l):o&&!u&&(k.test(e.nodeName)?Y(e,o):e.src=o),(l||u)&&A(e,{src:o})),L(function(){e._lazyRace&&delete e._lazyRace,h(e,n.lazyClass),v&&!e.complete||(v?U(g):I--,J(g))})}),te=function(e){var t,a=j.test(e.nodeName),i=a&&(e[r](n.sizesAttr)||e[r]("sizes")),s="auto"==i;(!s&&u||!a||!e.src&&!e.srcset||e.complete||v(e,n.errorClass))&&(t=C(e,"lazyunveilread").detail,s&&S.updateElem(e,!0,e.offsetWidth),e._lazyRace=!0,I++,ee(e,t,s,i,a))},ne=function(){if(!u){if(i.now()-b<999)return void c(ne,999);var e=M(function(){n.loadMode=3,Q()});u=!0,n.loadMode=3,Q(),l("scroll",function(){3==n.loadMode&&(n.loadMode=2),e()},!0)}};return{_:function(){b=i.now(),s=t.getElementsByClassName(n.lazyClass),d=t.getElementsByClassName(n.lazyClass+" "+n.preloadClass),$=n.hFac,l("scroll",Q,!0),l("resize",Q,!0),e.MutationObserver?new MutationObserver(Q).observe(a,{childList:!0,subtree:!0,attributes:!0}):(a[o]("DOMNodeInserted",Q,!0),a[o]("DOMAttrModified",Q,!0),setInterval(Q,999)),l("hashchange",Q,!0),["focus","mouseover","click","load","transitionend","animationend","webkitAnimationEnd"].forEach(function(e){t[o](e,Q,!0)}),/d$|^c/.test(t.readyState)?ne():(l("load",ne),t[o]("DOMContentLoaded",Q),c(ne,2e4)),s.length?K():Q()},checkElems:Q,unveil:te}}(),S=function(){var e,a=N(function(e,t,n,a){var i,s,o;if(e._lazysizesWidth=a,a+="px",e.setAttribute("sizes",a),f.test(t.nodeName||""))for(i=t.getElementsByTagName("source"),s=0,o=i.length;s<o;s++)i[s].setAttribute("sizes",a);n.detail.dataAttr||A(e,n.detail)}),i=function(e,t,n){var i,s=e.parentNode;s&&(n=b(e,s,n),i=C(e,"lazybeforesizes",{width:n,dataAttr:!!t}),i.defaultPrevented||(n=i.detail.width,n&&n!==e._lazysizesWidth&&a(e,s,i,n)))},s=function(){var t,n=e.length;if(n)for(t=0;t<n;t++)i(e[t])},o=M(s);return{_:function(){e=t.getElementsByClassName(n.autosizesClass),l("resize",o)},checkElems:o,updateElem:i}}(),B=function(){B.i||(B.i=!0,S._(),_._())};return function(){var t,a={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2};n=e.lazySizesConfig||e.lazysizesConfig||{};for(t in a)t in n||(n[t]=a[t]);e.lazySizesConfig=n,c(function(){n.init&&B()})}(),{cfg:n,autoSizer:S,loader:_,init:B,uP:A,aC:z,rC:h,hC:v,fire:C,gW:b,rAF:L}}}),function(e){var t=navigator.userAgent;e.HTMLPictureElement&&/ecko/.test(t)&&t.match(/rv\:(\d+)/)&&RegExp.$1<41&&addEventListener("resize",function(){var t,n=document.createElement("source"),a=function(e){var t,a,i=e.parentNode;"PICTURE"===i.nodeName.toUpperCase()?(t=n.cloneNode(),i.insertBefore(t,i.firstElementChild),setTimeout(function(){i.removeChild(t)})):(!e._pfLastSize||e.offsetWidth>e._pfLastSize)&&(e._pfLastSize=e.offsetWidth,a=e.sizes,e.sizes+=",100vw",setTimeout(function(){e.sizes=a}))},i=function(){var e,t=document.querySelectorAll("picture > img, img[srcset][sizes]");for(e=0;e<t.length;e++)a(t[e])},s=function(){clearTimeout(t),t=setTimeout(i,99)},o=e.matchMedia&&matchMedia("(orientation: landscape)"),r=function(){s(),o&&o.addListener&&o.addListener(s)};return n.srcset="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",/^[c|i]|d$/.test(document.readyState||"")?r():document.addEventListener("DOMContentLoaded",r),s}())}(window);